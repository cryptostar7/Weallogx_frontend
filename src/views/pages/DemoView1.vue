
<template lang="">
  <div>
    <button @click="testFunction()">Object</button>
  </div>
</template>
<script>
export default {
  methods: {
    testFunction: function() {
      let response = {
        "4": [
          {
            age: "59",
            EndOfPolicyYear: "1",
            PremiumOutlay: "$100,000",
            NetDistribution: "$0",
            TotalCharges: "$23,083",
            AccumulationValue: "$82,751",
            CashValue: "$1,900",
            DeathBenefit: "$1,824,858",
          },
          {
            age: "60",
            EndOfPolicyYear: "2",
            PremiumOutlay: "$100,000",
            NetDistribution: "$0",
            TotalCharges: "$23,937",
            AccumulationValue: "$170,374",
            CashValue: "$91,509",
            DeathBenefit: "$1,912,481",
          },
          {
            age: "61",
            EndOfPolicyYear: "3",
            PremiumOutlay: "$100,000",
            NetDistribution: "$0",
            TotalCharges: "$24,897",
            AccumulationValue: "$263,099",
            CashValue: "$186,255",
            DeathBenefit: "$2,005,206",
          },
          {
            age: "62",
            EndOfPolicyYear: "4",
            PremiumOutlay: "$100,000",
            NetDistribution: "$0",
            TotalCharges: "$26,011",
            AccumulationValue: "$361,120",
            CashValue: "$286,314",
            DeathBenefit: "$2,103,227",
          },
          {
            age: "63",
            EndOfPolicyYear: "5",
            PremiumOutlay: "$100,000",
            NetDistribution: "$0",
            TotalCharges: "$23,662",
            AccumulationValue: "$468,401",
            CashValue: "$395,650",
            DeathBenefit: "$1,742,107",
          },
          {
            age: "64",
            EndOfPolicyYear: "6",
            PremiumOutlay: "$100,000",
            NetDistribution: "$0",
            TotalCharges: "$23,448",
            AccumulationValue: "$583,368",
            CashValue: "$512,673",
            DeathBenefit: "$1,742,107",
          },
          {
            age: "65",
            EndOfPolicyYear: "7",
            PremiumOutlay: "$0",
            NetDistribution: "$0",
            TotalCharges: "$15,776",
            AccumulationValue: "$607,594",
            CashValue: "$538,955",
            DeathBenefit: "$1,742,107",
          },
          {
            age: "66",
            EndOfPolicyYear: "8",
            PremiumOutlay: "$0",
            NetDistribution: "$0",
            TotalCharges: "$16,040",
            AccumulationValue: "$633,231",
            CashValue: "$576,038",
            DeathBenefit: "$1,742,107",
          },
          {
            age: "67",
            EndOfPolicyYear: "9",
            PremiumOutlay: "$0",
            NetDistribution: "$0",
            TotalCharges: "$16,229",
            AccumulationValue: "$660,456",
            CashValue: "$614,708",
            DeathBenefit: "$1,742,107",
          },
          {
            age: "68",
            EndOfPolicyYear: "10",
            PremiumOutlay: "$0",
            NetDistribution: "$0",
            TotalCharges: "$16,361",
            AccumulationValue: "$689,438",
            CashValue: "$655,119",
            DeathBenefit: "$1,742,107",
          },
          {
            age: "69",
            EndOfPolicyYear: "11",
            PremiumOutlay: "$0",
            NetDistribution: "$0",
            TotalCharges: "$16,480",
            AccumulationValue: "$720,314",
            CashValue: "$697,440",
            DeathBenefit: "$1,742,107",
          },
          {
            age: "70",
            EndOfPolicyYear: "12",
            PremiumOutlay: "$0",
            NetDistribution: "$0",
            TotalCharges: "$9,453",
            AccumulationValue: "$760,629",
            CashValue: "$749,201",
            DeathBenefit: "$1,000,000",
          },
          {
            age: "71",
            EndOfPolicyYear: "13",
            PremiumOutlay: "$0",
            NetDistribution: "$0",
            TotalCharges: "$9,169",
            AccumulationValue: "$804,045",
            CashValue: "$804,045",
            DeathBenefit: "$1,000,000",
          },
          {
            age: "72",
            EndOfPolicyYear: "14",
            PremiumOutlay: "$0",
            NetDistribution: "$0",
            TotalCharges: "$8,833",
            AccumulationValue: "$850,830",
            CashValue: "$850,830",
            DeathBenefit: "$1,000,000",
          },
          {
            age: "73",
            EndOfPolicyYear: "15",
            PremiumOutlay: "$0",
            NetDistribution: "$0",
            TotalCharges: "$8,416",
            AccumulationValue: "$901,304",
            CashValue: "$901,304",
            DeathBenefit: "$1,000,447",
          },
          {
            age: "74",
            EndOfPolicyYear: "16",
            PremiumOutlay: "$0",
            NetDistribution: "$0",
            TotalCharges: "$1,297",
            AccumulationValue: "$962,677",
            CashValue: "$962,677",
            DeathBenefit: "$1,049,318",
          },
          {
            age: "75",
            EndOfPolicyYear: "17",
            PremiumOutlay: "$0",
            NetDistribution: "$0",
            TotalCharges: "$1,062",
            AccumulationValue: "$1,028,565",
            CashValue: "$1,028,565",
            DeathBenefit: "$1,100,564",
          },
          {
            age: "76",
            EndOfPolicyYear: "18",
            PremiumOutlay: "$0",
            NetDistribution: "$0",
            TotalCharges: "$933",
            AccumulationValue: "$1,099,171",
            CashValue: "$1,099,171",
            DeathBenefit: "$1,154,130",
          },
          {
            age: "77",
            EndOfPolicyYear: "19",
            PremiumOutlay: "$0",
            NetDistribution: "$0",
            TotalCharges: "$1,115",
            AccumulationValue: "$1,174,502",
            CashValue: "$1,174,502",
            DeathBenefit: "$1,233,227",
          },
          {
            age: "78",
            EndOfPolicyYear: "20",
            PremiumOutlay: "$0",
            NetDistribution: "$115,944",
            TotalCharges: "$1,335",
            AccumulationValue: "$1,254,502",
            CashValue: "$1,135,418",
            DeathBenefit: "$1,198,143",
          },
          {
            age: "79",
            EndOfPolicyYear: "21",
            PremiumOutlay: "$0",
            NetDistribution: "$115,944",
            TotalCharges: "$1,601",
            AccumulationValue: "$1,339,130",
            CashValue: "$1,095,008",
            DeathBenefit: "$1,161,964",
          },
          {
            age: "80",
            EndOfPolicyYear: "22",
            PremiumOutlay: "$0",
            NetDistribution: "$115,944",
            TotalCharges: "$1,919",
            AccumulationValue: "$1,428,622",
            CashValue: "$1,053,209",
            DeathBenefit: "$1,124,640",
          },
          {
            age: "81",
            EndOfPolicyYear: "23",
            PremiumOutlay: "$0",
            NetDistribution: "$115,944",
            TotalCharges: "$2,305",
            AccumulationValue: "$1,523,209",
            CashValue: "$1,009,942",
            DeathBenefit: "$1,086,102",
          },
          {
            age: "82",
            EndOfPolicyYear: "24",
            PremiumOutlay: "$0",
            NetDistribution: "$115,944",
            TotalCharges: "$2,802",
            AccumulationValue: "$1,623,096",
            CashValue: "$965,081",
            DeathBenefit: "$1,046,235",
          },
          {
            age: "83",
            EndOfPolicyYear: "25",
            PremiumOutlay: "$0",
            NetDistribution: "$115,944",
            TotalCharges: "$3,407",
            AccumulationValue: "$1,728,500",
            CashValue: "$918,500",
            DeathBenefit: "$1,004,925",
          },
        ],
        "5": [
          {
            age: "84",
            EndOfPolicyYear: "26",
            PremiumOutlay: "$0",
            NetDistribution: "$115,944",
            TotalCharges: "$4,159",
            AccumulationValue: "$1,839,613",
            CashValue: "$870,028",
            DeathBenefit: "$962,009",
          },
          {
            age: "85",
            EndOfPolicyYear: "27",
            PremiumOutlay: "$0",
            NetDistribution: "$115,944",
            TotalCharges: "$4,948",
            AccumulationValue: "$1,956,751",
            CashValue: "$819,603",
            DeathBenefit: "$917,441",
          },
          {
            age: "86",
            EndOfPolicyYear: "28",
            PremiumOutlay: "$0",
            NetDistribution: "$115,944",
            TotalCharges: "$5,910",
            AccumulationValue: "$2,080,110",
            CashValue: "$767,021",
            DeathBenefit: "$871,026",
          },
          {
            age: "87",
            EndOfPolicyYear: "29",
            PremiumOutlay: "$0",
            NetDistribution: "$115,944",
            TotalCharges: "$7,034",
            AccumulationValue: "$2,209,907",
            CashValue: "$712,079",
            DeathBenefit: "$822,574",
          },
          {
            age: "88",
            EndOfPolicyYear: "30",
            PremiumOutlay: "$0",
            NetDistribution: "$115,944",
            TotalCharges: "$8,381",
            AccumulationValue: "$2,346,310",
            CashValue: "$654,507",
            DeathBenefit: "$771,823",
          },
          {
            age: "89",
            EndOfPolicyYear: "31",
            PremiumOutlay: "$0",
            NetDistribution: "$115,944",
            TotalCharges: "$10,038",
            AccumulationValue: "$2,489,407",
            CashValue: "$593,929",
            DeathBenefit: "$718,399",
          },
          {
            age: "90",
            EndOfPolicyYear: "32",
            PremiumOutlay: "$0",
            NetDistribution: "$115,944",
            TotalCharges: "$12,145",
            AccumulationValue: "$2,639,141",
            CashValue: "$529,806",
            DeathBenefit: "$661,763",
          },
          {
            age: "91",
            EndOfPolicyYear: "33",
            PremiumOutlay: "$0",
            NetDistribution: "$115,944",
            TotalCharges: "$14,941",
            AccumulationValue: "$2,795,204",
            CashValue: "$461,317",
            DeathBenefit: "$601,078",
          },
          {
            age: "92",
            EndOfPolicyYear: "34",
            PremiumOutlay: "$0",
            NetDistribution: "$115,944",
            TotalCharges: "$14,719",
            AccumulationValue: "$2,961,107",
            CashValue: "$391,442",
            DeathBenefit: "$509,887",
          },
          {
            age: "93",
            EndOfPolicyYear: "35",
            PremiumOutlay: "$0",
            NetDistribution: "$115,944",
            TotalCharges: "$13,537",
            AccumulationValue: "$3,138,470",
            CashValue: "$321,238",
            DeathBenefit: "$415,392",
          },
          {
            age: "94",
            EndOfPolicyYear: "36",
            PremiumOutlay: "$0",
            NetDistribution: "$115,944",
            TotalCharges: "$10,968",
            AccumulationValue: "$3,329,463",
            CashValue: "$252,285",
            DeathBenefit: "$318,874",
          },
          {
            age: "95",
            EndOfPolicyYear: "37",
            PremiumOutlay: "$0",
            NetDistribution: "$115,944",
            TotalCharges: "$6,592",
            AccumulationValue: "$3,536,840",
            CashValue: "$186,719",
            DeathBenefit: "$222,088",
          },
          {
            age: "96",
            EndOfPolicyYear: "38",
            PremiumOutlay: "$0",
            NetDistribution: "$0",
            TotalCharges: "$90",
            AccumulationValue: "$3,764,220",
            CashValue: "$246,593",
            DeathBenefit: "$246,593",
          },
          {
            age: "97",
            EndOfPolicyYear: "39",
            PremiumOutlay: "$0",
            NetDistribution: "$0",
            TotalCharges: "$90",
            AccumulationValue: "$4,006,490",
            CashValue: "$312,982",
            DeathBenefit: "$312,982",
          },
          {
            age: "98",
            EndOfPolicyYear: "40",
            PremiumOutlay: "$0",
            NetDistribution: "$0",
            TotalCharges: "$90",
            AccumulationValue: "$4,264,641",
            CashValue: "$386,457",
            DeathBenefit: "$386,457",
          },
          {
            age: "99",
            EndOfPolicyYear: "41",
            PremiumOutlay: "$0",
            NetDistribution: "$0",
            TotalCharges: "$90",
            AccumulationValue: "$4,539,727",
            CashValue: "$467,634",
            DeathBenefit: "$467,634",
          },
          {
            age: "100",
            EndOfPolicyYear: "42",
            PremiumOutlay: "$0",
            NetDistribution: "$0",
            TotalCharges: "$90",
            AccumulationValue: "$4,832,876",
            CashValue: "$557,179",
            DeathBenefit: "$557,179",
          },
          {
            age: "101",
            EndOfPolicyYear: "43",
            PremiumOutlay: "$0",
            NetDistribution: "$0",
            TotalCharges: "$90",
            AccumulationValue: "$5,145,292",
            CashValue: "$655,809",
            DeathBenefit: "$655,809",
          },
          {
            age: "102",
            EndOfPolicyYear: "44",
            PremiumOutlay: "$0",
            NetDistribution: "$0",
            TotalCharges: "$90",
            AccumulationValue: "$5,478,258",
            CashValue: "$764,301",
            DeathBenefit: "$764,301",
          },
          {
            age: "103",
            EndOfPolicyYear: "45",
            PremiumOutlay: "$0",
            NetDistribution: "$0",
            TotalCharges: "$90",
            AccumulationValue: "$5,833,145",
            CashValue: "$883,490",
            DeathBenefit: "$883,490",
          },
          {
            age: "104",
            EndOfPolicyYear: "46",
            PremiumOutlay: "$0",
            NetDistribution: "$0",
            TotalCharges: "$90",
            AccumulationValue: "$6,211,415",
            CashValue: "$1,014,278",
            DeathBenefit: "$1,014,278",
          },
          {
            age: "105",
            EndOfPolicyYear: "47",
            PremiumOutlay: "$0",
            NetDistribution: "$0",
            TotalCharges: "$90",
            AccumulationValue: "$6,614,631",
            CashValue: "$1,157,636",
            DeathBenefit: "$1,157,636",
          },
          {
            age: "106",
            EndOfPolicyYear: "48",
            PremiumOutlay: "$0",
            NetDistribution: "$0",
            TotalCharges: "$90",
            AccumulationValue: "$7,044,459",
            CashValue: "$1,314,615",
            DeathBenefit: "$1,314,615",
          },
          {
            age: "107",
            EndOfPolicyYear: "49",
            PremiumOutlay: "$0",
            NetDistribution: "$0",
            TotalCharges: "$90",
            AccumulationValue: "$7,502,678",
            CashValue: "$1,486,342",
            DeathBenefit: "$1,486,342",
          },
          {
            age: "108",
            EndOfPolicyYear: "50",
            PremiumOutlay: "$0",
            NetDistribution: "$0",
            TotalCharges: "$90",
            AccumulationValue: "$7,991,190",
            CashValue: "$1,674,037",
            DeathBenefit: "$1,674,037",
          },
        ],
        "21": [
          {
            "0": "59",
            "1": "1",
            "2": "$100,000",
            "3": "$0",
            "4": "$83",
            "5": "$24,331",
            "6": "$0",
            "7": "$75,752",
            "8": "$0",
            "9": "$1,817,859",
          },
          {
            "0": "60",
            "1": "2",
            "2": "$100,000",
            "3": "$0",
            "4": "$158",
            "5": "$25,313",
            "6": "$0",
            "7": "$150,597",
            "8": "$71,732",
            "9": "$1,892,704",
          },
          {
            "0": "61",
            "1": "3",
            "2": "$100,000",
            "3": "$0",
            "4": "$233",
            "5": "$26,418",
            "6": "$0",
            "7": "$224,412",
            "8": "$147,568",
            "9": "$1,966,519",
          },
          {
            "0": "62",
            "1": "4",
            "2": "$100,000",
            "3": "$0",
            "4": "$306",
            "5": "$27,699",
            "6": "$0",
            "7": "$297,018",
            "8": "$222,212",
            "9": "$2,039,125",
          },
          {
            "0": "63",
            "1": "5",
            "2": "$100,000",
            "3": "$0",
            "4": "$379",
            "5": "$25,995",
            "6": "$0",
            "7": "$371,403",
            "8": "$298,653",
            "9": "$1,742,107",
          },
          {
            "0": "64",
            "1": "6",
            "2": "$100,000",
            "3": "$0",
            "4": "$453",
            "5": "$26,578",
            "6": "$0",
            "7": "$445,279",
            "8": "$374,584",
            "9": "$1,742,107",
          },
          {
            "0": "65",
            "1": "7",
            "2": "$0",
            "3": "$0",
            "4": "$434",
            "5": "$20,056",
            "6": "$0",
            "7": "$425,657",
            "8": "$357,018",
            "9": "$1,742,107",
          },
          {
            "0": "66",
            "1": "8",
            "2": "$0",
            "3": "$0",
            "4": "$414",
            "5": "$21,673",
            "6": "$0",
            "7": "$404,398",
            "8": "$347,205",
            "9": "$1,742,107",
          },
          {
            "0": "67",
            "1": "9",
            "2": "$0",
            "3": "$0",
            "4": "$392",
            "5": "$23,450",
            "6": "$0",
            "7": "$381,340",
            "8": "$335,592",
            "9": "$1,742,107",
          },
          {
            "0": "68",
            "1": "10",
            "2": "$0",
            "3": "$0",
            "4": "$368",
            "5": "$25,417",
            "6": "$0",
            "7": "$356,291",
            "8": "$321,971",
            "9": "$1,742,107",
          },
          {
            "0": "69",
            "1": "11",
            "2": "$0",
            "3": "$0",
            "4": "$341",
            "5": "$27,646",
            "6": "$0",
            "7": "$328,986",
            "8": "$306,113",
            "9": "$1,742,107",
          },
          {
            "0": "70",
            "1": "12",
            "2": "$0",
            "3": "$0",
            "4": "$319",
            "5": "$17,951",
            "6": "$0",
            "7": "$311,355",
            "8": "$299,926",
            "9": "$1,000,000",
          },
          {
            "0": "71",
            "1": "13",
            "2": "$0",
            "3": "$0",
            "4": "$301",
            "5": "$19,511",
            "6": "$0",
            "7": "$292,144",
            "8": "$292,144",
            "9": "$1,000,000",
          },
          {
            "0": "72",
            "1": "14",
            "2": "$0",
            "3": "$0",
            "4": "$281",
            "5": "$21,410",
            "6": "$0",
            "7": "$271,015",
            "8": "$271,015",
            "9": "$1,000,000",
          },
          {
            "0": "73",
            "1": "15",
            "2": "$0",
            "3": "$0",
            "4": "$258",
            "5": "$23,703",
            "6": "$0",
            "7": "$247,571",
            "8": "$247,571",
            "9": "$1,000,000",
          },
          {
            "0": "74",
            "1": "16",
            "2": "$0",
            "3": "$0",
            "4": "$233",
            "5": "$26,426",
            "6": "$0",
            "7": "$221,378",
            "8": "$221,378",
            "9": "$1,000,000",
          },
          {
            "0": "75",
            "1": "17",
            "2": "$0",
            "3": "$0",
            "4": "$205",
            "5": "$29,634",
            "6": "$0",
            "7": "$191,949",
            "8": "$191,949",
            "9": "$1,000,000",
          },
          {
            "0": "76",
            "1": "18",
            "2": "$0",
            "3": "$0",
            "4": "$174",
            "5": "$33,358",
            "6": "$0",
            "7": "$158,765",
            "8": "$158,765",
            "9": "$1,000,000",
          },
          {
            "0": "77",
            "1": "19",
            "2": "$0",
            "3": "$0",
            "4": "$138",
            "5": "$37,674",
            "6": "$0",
            "7": "$121,230",
            "8": "$121,230",
            "9": "$1,000,000",
          },
          {
            "0": "78",
            "1": "20",
            "2": "$0",
            "3": "$86,958",
            "4": "$786",
            "5": "$31,874",
            "6": "$2,899",
            "7": "$90,142",
            "8": "$285",
            "9": "$910,143",
          },
        ],
      };

      console.log(response);

      // let response = { 4: obj, 5: obj, 7: obj, 8: obj };
      let page = "4,5";

      // var test = this.getSearializedData(response, page);
   

      let pages = page.split(",").map(p => Number(p));
      let sequence = this.getPageSequenceGroup(pages);
   console.log(sequence);
      return true;
      let arr = [];
      let headers = [];
      let total_rows = 0;
      let total_columns = 0;
      let finalObj = false;
      let allData = [];
      let filterData = [];

      // create a group of sequence data
      sequence.forEach(p => {
        let pdata = [];
        let maxLength = 0;
        p.forEach(item => {
          let tmp = response[item].map(a => Object.values(a));
          pdata = [...pdata, ...tmp];
          if (total_rows < pdata.length) {
            total_rows = pdata.length;
          }
        });

        allData.push(pdata);
      });

      // merge sequenced data in single object
      allData.forEach(data => {
        let temp_data = [];
        for (var i = 0; i < total_rows; i++) {
          temp_data.push([...(filterData[i] || ""), ...(data[i] || "")]);
        }
        filterData = { ...temp_data };
      });

      // convert into values of object
      filterData = Object.values(filterData);

      // get max column length of the object
      filterData.forEach(items => {
        if (total_columns < items.length) {
          total_columns = items.length;
        }
      });

      // to eqalize the data in each object
      filterData = filterData.map(items => {
        let tempItems = [];
        for (let i = 0; i < total_columns; i++) {
          tempItems.push(items[i] || "");
        }
        return tempItems;
      });

      // create header object
      for (let i = 0; i < total_columns; i++) {
        headers.push("");
      }

      finalObj = { data: filterData, headers: headers };
      console.log(finalObj);
    },
    getPageSequenceGroup: function(pages) {
      let seq = [];
      let currentSeq = [];
      pages.forEach((p, i) => {
        if (i) {
          if (pages.includes(p - 1)) {
            currentSeq.push(p);
          } else {
            seq.push(currentSeq);
            currentSeq = [];
            currentSeq.push(p);
          }
        } else {
          currentSeq.push(p);
        }
      });
      seq.push(currentSeq);
      return seq;
    },

    getSearializedData: function(response, page) {
      let headers = [];
      let total_rows = 0;
      let total_columns = 0;
      let finalObj = false;
      let allData = [];
      let filterData = [];

      let pages = page.split(",").map(p => Number(p));

      // get object of searialized page
      let sequence = this.getPageSequenceGroup(pages);

      // create a group of sequence data
      sequence.forEach(p => {
        let pdata = [];
        let maxLength = 0;
        p.forEach(item => {
          let tmp = response[item].map(a => Object.values(a));
          pdata = [...pdata, ...tmp];
          if (total_rows < pdata.length) {
            total_rows = pdata.length;
          }
        });

        allData.push(pdata);
      });

      // merge sequenced data in single object
      allData.forEach(data => {
        let temp_data = [];
        for (var i = 0; i < total_rows; i++) {
          temp_data.push([...(filterData[i] || ""), ...(data[i] || "")]);
        }
        filterData = { ...temp_data };
      });

      console.log(filterData);

      // convert into values of object
      filterData = Object.values(filterData);

      // get max column length of the object
      filterData.forEach(items => {
        if (total_columns < items.length) {
          total_columns = items.length;
        }
      });

      // to eqalize the data in each object
      filterData = filterData.map(items => {
        let tempItems = [];
        for (let i = 0; i < total_columns; i++) {
          tempItems.push(items[i] || "");
        }
        return tempItems;
      });

      // create header object
      for (let i = 0; i < total_columns; i++) {
        headers.push("");
      }

      finalObj = {
        data: filterData.map(a => a.map(i => i.replace("-", ""))),
        headers: headers,
      };
      return finalObj;
    },
  },
};
</script>
<style lang="">
</style>