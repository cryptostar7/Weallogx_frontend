<template lang="">
  <div>
    <button @click="testFunction()">Test</button>
  </div>
</template>
<script>
export default {
  methods: {
    testFunction: function() {
      var obj = {
        "4": [
          {
            age: "59",
            EndOfPolicyYear: "1",
            PremiumOutlay: "$100000.00",
            NetDistribution: "$0",
            TotalCharges: "$23083",
            AccumulationValue: "$82751",
            CashValue: "$1900",
            DeathBenefit: "$1824858",
          },
          {
            age: "60",
            EndOfPolicyYear: "2",
            PremiumOutlay: "$100000.00",
            NetDistribution: "$0",
            TotalCharges: "$23937",
            AccumulationValue: "$170374",
            CashValue: "$91509",
            DeathBenefit: "$1912481",
          },
          {
            age: "61",
            EndOfPolicyYear: "3",
            PremiumOutlay: "$100000.00",
            NetDistribution: "$0",
            TotalCharges: "$24897",
            AccumulationValue: "$263099",
            CashValue: "$186255",
            DeathBenefit: "$2005206",
          },
          {
            age: "62",
            EndOfPolicyYear: "4",
            PremiumOutlay: "$100000.00",
            NetDistribution: "$0",
            TotalCharges: "$26011",
            AccumulationValue: "$361120",
            CashValue: "$286314",
            DeathBenefit: "$2103227",
          },
          {
            age: "63",
            EndOfPolicyYear: "5",
            PremiumOutlay: "$100000.00",
            NetDistribution: "$0",
            TotalCharges: "$23662",
            AccumulationValue: "$468401",
            CashValue: "$395650",
            DeathBenefit: "$1742107",
          },
          {
            age: "64",
            EndOfPolicyYear: "6",
            PremiumOutlay: "$100000.00",
            NetDistribution: "$0",
            TotalCharges: "$23448",
            AccumulationValue: "$583368",
            CashValue: "$512673",
            DeathBenefit: "$1742107",
          },
          {
            age: "65",
            EndOfPolicyYear: "7",
            PremiumOutlay: "$0.00",
            NetDistribution: "$0",
            TotalCharges: "$15776",
            AccumulationValue: "$607594",
            CashValue: "$538955",
            DeathBenefit: "$1742107",
          },
          {
            age: "66",
            EndOfPolicyYear: "8",
            PremiumOutlay: "$0.00",
            NetDistribution: "$0",
            TotalCharges: "$16040",
            AccumulationValue: "$633231",
            CashValue: "$576038",
            DeathBenefit: "$1742107",
          },
          {
            age: "67",
            EndOfPolicyYear: "9",
            PremiumOutlay: "$0.00",
            NetDistribution: "$0",
            TotalCharges: "$16229",
            AccumulationValue: "$660456",
            CashValue: "$614708",
            DeathBenefit: "$1742107",
          },
          {
            age: "68",
            EndOfPolicyYear: "10",
            PremiumOutlay: "$0.00",
            NetDistribution: "$0",
            TotalCharges: "$16361",
            AccumulationValue: "$689438",
            CashValue: "$655119",
            DeathBenefit: "$1742107",
          },
          {
            age: "69",
            EndOfPolicyYear: "11",
            PremiumOutlay: "$0.00",
            NetDistribution: "$0",
            TotalCharges: "$16480",
            AccumulationValue: "$720314",
            CashValue: "$697440",
            DeathBenefit: "$1742107",
          },
          {
            age: "70",
            EndOfPolicyYear: "12",
            PremiumOutlay: "$0.00",
            NetDistribution: "$0",
            TotalCharges: "$9453",
            AccumulationValue: "$760629",
            CashValue: "$749201",
            DeathBenefit: "$1000000",
          },
          {
            age: "71",
            EndOfPolicyYear: "13",
            PremiumOutlay: "$0.00",
            NetDistribution: "$0",
            TotalCharges: "$9169",
            AccumulationValue: "$804045",
            CashValue: "$804045",
            DeathBenefit: "$1000000",
          },
          {
            age: "72",
            EndOfPolicyYear: "14",
            PremiumOutlay: "$0.00",
            NetDistribution: "$0",
            TotalCharges: "$8833",
            AccumulationValue: "$850830",
            CashValue: "$850830",
            DeathBenefit: "$1000000",
          },
          {
            age: "73",
            EndOfPolicyYear: "15",
            PremiumOutlay: "$0.00",
            NetDistribution: "$0",
            TotalCharges: "$8416",
            AccumulationValue: "$901304",
            CashValue: "$901304",
            DeathBenefit: "$1000447",
          },
          {
            age: "74",
            EndOfPolicyYear: "16",
            PremiumOutlay: "$0.00",
            NetDistribution: "$0",
            TotalCharges: "$1297",
            AccumulationValue: "$962677",
            CashValue: "$962677",
            DeathBenefit: "$1049318",
          },
          {
            age: "75",
            EndOfPolicyYear: "17",
            PremiumOutlay: "$0.00",
            NetDistribution: "$0",
            TotalCharges: "$1062",
            AccumulationValue: "$1028565",
            CashValue: "$1028565",
            DeathBenefit: "$1100564",
          },
          {
            age: "76",
            EndOfPolicyYear: "18",
            PremiumOutlay: "$0.00",
            NetDistribution: "$0",
            TotalCharges: "$933",
            AccumulationValue: "$1099171",
            CashValue: "$1099171",
            DeathBenefit: "$1154130",
          },
          {
            age: "77",
            EndOfPolicyYear: "19",
            PremiumOutlay: "$0.00",
            NetDistribution: "$0",
            TotalCharges: "$1115",
            AccumulationValue: "$1174502",
            CashValue: "$1174502",
            DeathBenefit: "$1233227",
          },
          {
            age: "78",
            EndOfPolicyYear: "20",
            PremiumOutlay: "$0.00",
            NetDistribution: "$115944",
            TotalCharges: "$1335",
            AccumulationValue: "$1254502",
            CashValue: "$1135418",
            DeathBenefit: "$1198143",
          },
          {
            age: "79",
            EndOfPolicyYear: "21",
            PremiumOutlay: "$0.00",
            NetDistribution: "$115944",
            TotalCharges: "$1601",
            AccumulationValue: "$1339130",
            CashValue: "$1095008",
            DeathBenefit: "$1161964",
          },
          {
            age: "80",
            EndOfPolicyYear: "22",
            PremiumOutlay: "$0.00",
            NetDistribution: "$115944",
            TotalCharges: "$1919",
            AccumulationValue: "$1428622",
            CashValue: "$1053209",
            DeathBenefit: "$1124640",
          },
          {
            age: "81",
            EndOfPolicyYear: "23",
            PremiumOutlay: "$0.00",
            NetDistribution: "$115944",
            TotalCharges: "$2305",
            AccumulationValue: "$1523209",
            CashValue: "$1009942",
            DeathBenefit: "$1086102",
          },
          {
            age: "82",
            EndOfPolicyYear: "24",
            PremiumOutlay: "$0.00",
            NetDistribution: "$115944",
            TotalCharges: "$2802",
            AccumulationValue: "$1623096",
            CashValue: "$965081",
            DeathBenefit: "$1046235",
          },
          {
            age: "83",
            EndOfPolicyYear: "25",
            PremiumOutlay: "$0.00",
            NetDistribution: "$115944",
            TotalCharges: "$3407",
            AccumulationValue: "$1728500",
            CashValue: "$918500",
            DeathBenefit: "$1004925",
          },
        ],
        "22": [
          {
            "0": "59",
            "1": "1",
            "2": "$100000.00",
            "3": "$0",
            "4": "$81252",
            "5": "$401",
            "6": "$1823359",
            "7": "$82751",
            "8": "$1900",
            "9": "$1824858",
          },
          {
            "0": "60",
            "1": "2",
            "2": "$100000.00",
            "3": "$0",
            "4": "$165829",
            "5": "$86964",
            "6": "$1907936",
            "7": "$170374",
            "8": "$91509",
            "9": "$1912481",
          },
          {
            "0": "61",
            "1": "3",
            "2": "$100000.00",
            "3": "$0",
            "4": "$253792",
            "5": "$176948",
            "6": "$1995899",
            "7": "$263099",
            "8": "$186255",
            "9": "$2005206",
          },
          {
            "0": "62",
            "1": "4",
            "2": "$100000.00",
            "3": "$0",
            "4": "$345160",
            "5": "$270353",
            "6": "$2087267",
            "7": "$361120",
            "8": "$286314",
            "9": "$2103227",
          },
          {
            "0": "63",
            "1": "5",
            "2": "$100000.00",
            "3": "$0",
            "4": "$443553",
            "5": "$370803",
            "6": "$1742107",
            "7": "$468401",
            "8": "$395650",
            "9": "$1742107",
          },
          {
            "0": "64",
            "1": "6",
            "2": "$100000.00",
            "3": "$0",
            "4": "$547180",
            "5": "$476485",
            "6": "$1742107",
            "7": "$583368",
            "8": "$512673",
            "9": "$1742107",
          },
          {
            "0": "65",
            "1": "7",
            "2": "$0.00",
            "3": "$0",
            "4": "$558969",
            "5": "$490330",
            "6": "$1742107",
            "7": "$607594",
            "8": "$538955",
            "9": "$1742107",
          },
          {
            "0": "66",
            "1": "8",
            "2": "$0.00",
            "3": "$0",
            "4": "$570977",
            "5": "$513783",
            "6": "$1742107",
            "7": "$633231",
            "8": "$576038",
            "9": "$1742107",
          },
          {
            "0": "67",
            "1": "9",
            "2": "$0.00",
            "3": "$0",
            "4": "$583272",
            "5": "$537524",
            "6": "$1742107",
            "7": "$660456",
            "8": "$614708",
            "9": "$1742107",
          },
          {
            "0": "68",
            "1": "10",
            "2": "$0.00",
            "3": "$0",
            "4": "$595909",
            "5": "$561590",
            "6": "$1742107",
            "7": "$689438",
            "8": "$655119",
            "9": "$1742107",
          },
          {
            "0": "69",
            "1": "11",
            "2": "$0.00",
            "3": "$0",
            "4": "$608893",
            "5": "$586019",
            "6": "$1742107",
            "7": "$720314",
            "8": "$697440",
            "9": "$1742107",
          },
          {
            "0": "70",
            "1": "12",
            "2": "$0.00",
            "3": "$0",
            "4": "$629555",
            "5": "$618127",
            "6": "$1000000",
            "7": "$760629",
            "8": "$749201",
            "9": "$1000000",
          },
          {
            "0": "71",
            "1": "13",
            "2": "$0.00",
            "3": "$0",
            "4": "$651323",
            "5": "$651323",
            "6": "$1000000",
            "7": "$804045",
            "8": "$804045",
            "9": "$1000000",
          },
          {
            "0": "72",
            "1": "14",
            "2": "$0.00",
            "3": "$0",
            "4": "$674252",
            "5": "$674252",
            "6": "$1000000",
            "7": "$850830",
            "8": "$850830",
            "9": "$1000000",
          },
          {
            "0": "73",
            "1": "15",
            "2": "$0.00",
            "3": "$0",
            "4": "$698434",
            "5": "$698434",
            "6": "$1000000",
            "7": "$901304",
            "8": "$901304",
            "9": "$1000447",
          },
          {
            "0": "74",
            "1": "16",
            "2": "$0.00",
            "3": "$0",
            "4": "$730558",
            "5": "$730558",
            "6": "$1000000",
            "7": "$962677",
            "8": "$962677",
            "9": "$1049318",
          },
          {
            "0": "75",
            "1": "17",
            "2": "$0.00",
            "3": "$0",
            "4": "$764280",
            "5": "$764280",
            "6": "$1000000",
            "7": "$1028565",
            "8": "$1028565",
            "9": "$1100564",
          },
          {
            "0": "76",
            "1": "18",
            "2": "$0.00",
            "3": "$0",
            "4": "$799771",
            "5": "$799771",
            "6": "$1000000",
            "7": "$1099171",
            "8": "$1099171",
            "9": "$1154130",
          },
          {
            "0": "77",
            "1": "19",
            "2": "$0.00",
            "3": "$0",
            "4": "$837237",
            "5": "$837237",
            "6": "$1000000",
            "7": "$1174502",
            "8": "$1174502",
            "9": "$1233227",
          },
          {
            "0": "78",
            "1": "20",
            "2": "$0.00",
            "3": "$115944",
            "4": "$876943",
            "5": "$757858",
            "6": "$880916",
            "7": "$1254502",
            "8": "$1135418",
            "9": "$1198143",
          },
          {
            "0": "79",
            "1": "21",
            "2": "$0.00",
            "3": "$115944",
            "4": "$919214",
            "5": "$675092",
            "6": "$755877",
            "7": "$1339130",
            "8": "$1095008",
            "9": "$1161964",
          },
          {
            "0": "80",
            "1": "22",
            "2": "$0.00",
            "3": "$115944",
            "4": "$964472",
            "5": "$589059",
            "6": "$637282",
            "7": "$1428622",
            "8": "$1053209",
            "9": "$1124640",
          },
          {
            "0": "81",
            "1": "23",
            "2": "$0.00",
            "3": "$115944",
            "4": "$1012718",
            "5": "$499450",
            "6": "$550086",
            "7": "$1523209",
            "8": "$1009942",
            "9": "$1086102",
          },
          {
            "0": "82",
            "1": "24",
            "2": "$0.00",
            "3": "$115944",
            "4": "$1063142",
            "5": "$405127",
            "6": "$458284",
            "7": "$1623096",
            "8": "$965081",
            "9": "$1046235",
          },
          {
            "0": "83",
            "1": "25",
            "2": "$0.00",
            "3": "$115944",
            "4": "$1115794",
            "5": "$305794",
            "6": "$361584",
            "7": "$1728500",
            "8": "$918500",
            "9": "$1004925",
          },
        ],
        "23": [
          {
            "0": "59",
            "1": "1",
            "2": "$100000.00",
            "3": "$0",
            "4": "$81252",
            "5": "$401",
            "6": "$1823359",
            "7": "$82751",
            "8": "$1900",
            "9": "$1824858",
          },
          {
            "0": "60",
            "1": "2",
            "2": "$100000.00",
            "3": "$0",
            "4": "$165829",
            "5": "$86964",
            "6": "$1907936",
            "7": "$170374",
            "8": "$91509",
            "9": "$1912481",
          },
          {
            "0": "61",
            "1": "3",
            "2": "$100000.00",
            "3": "$0",
            "4": "$253792",
            "5": "$176948",
            "6": "$1995899",
            "7": "$263099",
            "8": "$186255",
            "9": "$2005206",
          },
          {
            "0": "62",
            "1": "4",
            "2": "$100000.00",
            "3": "$0",
            "4": "$345160",
            "5": "$270353",
            "6": "$2087267",
            "7": "$361120",
            "8": "$286314",
            "9": "$2103227",
          },
          {
            "0": "63",
            "1": "5",
            "2": "$100000.00",
            "3": "$0",
            "4": "$443553",
            "5": "$370803",
            "6": "$1742107",
            "7": "$468401",
            "8": "$395650",
            "9": "$1742107",
          },
          {
            "0": "64",
            "1": "6",
            "2": "$100000.00",
            "3": "$0",
            "4": "$547180",
            "5": "$476485",
            "6": "$1742107",
            "7": "$583368",
            "8": "$512673",
            "9": "$1742107",
          },
          {
            "0": "65",
            "1": "7",
            "2": "$0.00",
            "3": "$0",
            "4": "$558969",
            "5": "$490330",
            "6": "$1742107",
            "7": "$607594",
            "8": "$538955",
            "9": "$1742107",
          },
          {
            "0": "66",
            "1": "8",
            "2": "$0.00",
            "3": "$0",
            "4": "$570977",
            "5": "$513783",
            "6": "$1742107",
            "7": "$633231",
            "8": "$576038",
            "9": "$1742107",
          },
          {
            "0": "67",
            "1": "9",
            "2": "$0.00",
            "3": "$0",
            "4": "$583272",
            "5": "$537524",
            "6": "$1742107",
            "7": "$660456",
            "8": "$614708",
            "9": "$1742107",
          },
          {
            "0": "68",
            "1": "10",
            "2": "$0.00",
            "3": "$0",
            "4": "$595909",
            "5": "$561590",
            "6": "$1742107",
            "7": "$689438",
            "8": "$655119",
            "9": "$1742107",
          },
          {
            "0": "69",
            "1": "11",
            "2": "$0.00",
            "3": "$0",
            "4": "$608893",
            "5": "$586019",
            "6": "$1742107",
            "7": "$720314",
            "8": "$697440",
            "9": "$1742107",
          },
          {
            "0": "70",
            "1": "12",
            "2": "$0.00",
            "3": "$0",
            "4": "$629555",
            "5": "$618127",
            "6": "$1000000",
            "7": "$760629",
            "8": "$749201",
            "9": "$1000000",
          },
          {
            "0": "71",
            "1": "13",
            "2": "$0.00",
            "3": "$0",
            "4": "$651323",
            "5": "$651323",
            "6": "$1000000",
            "7": "$804045",
            "8": "$804045",
            "9": "$1000000",
          },
          {
            "0": "72",
            "1": "14",
            "2": "$0.00",
            "3": "$0",
            "4": "$674252",
            "5": "$674252",
            "6": "$1000000",
            "7": "$850830",
            "8": "$850830",
            "9": "$1000000",
          },
          {
            "0": "73",
            "1": "15",
            "2": "$0.00",
            "3": "$0",
            "4": "$698434",
            "5": "$698434",
            "6": "$1000000",
            "7": "$901304",
            "8": "$901304",
            "9": "$1000447",
          },
          {
            "0": "74",
            "1": "16",
            "2": "$0.00",
            "3": "$0",
            "4": "$730558",
            "5": "$730558",
            "6": "$1000000",
            "7": "$962677",
            "8": "$962677",
            "9": "$1049318",
          },
          {
            "0": "75",
            "1": "17",
            "2": "$0.00",
            "3": "$0",
            "4": "$764280",
            "5": "$764280",
            "6": "$1000000",
            "7": "$1028565",
            "8": "$1028565",
            "9": "$1100564",
          },
          {
            "0": "76",
            "1": "18",
            "2": "$0.00",
            "3": "$0",
            "4": "$799771",
            "5": "$799771",
            "6": "$1000000",
            "7": "$1099171",
            "8": "$1099171",
            "9": "$1154130",
          },
          {
            "0": "77",
            "1": "19",
            "2": "$0.00",
            "3": "$0",
            "4": "$837237",
            "5": "$837237",
            "6": "$1000000",
            "7": "$1174502",
            "8": "$1174502",
            "9": "$1233227",
          },
          {
            "0": "78",
            "1": "20",
            "2": "$0.00",
            "3": "$115944",
            "4": "$876943",
            "5": "$757858",
            "6": "$880916",
            "7": "$1254502",
            "8": "$1135418",
            "9": "$1198143",
          },
          {
            "0": "79",
            "1": "21",
            "2": "$0.00",
            "3": "$115944",
            "4": "$919214",
            "5": "$675092",
            "6": "$755877",
            "7": "$1339130",
            "8": "$1095008",
            "9": "$1161964",
          },
          {
            "0": "80",
            "1": "22",
            "2": "$0.00",
            "3": "$115944",
            "4": "$964472",
            "5": "$589059",
            "6": "$637282",
            "7": "$1428622",
            "8": "$1053209",
            "9": "$1124640",
          },
          {
            "0": "81",
            "1": "23",
            "2": "$0.00",
            "3": "$115944",
            "4": "$1012718",
            "5": "$499450",
            "6": "$550086",
            "7": "$1523209",
            "8": "$1009942",
            "9": "$1086102",
          },
          {
            "0": "82",
            "1": "24",
            "2": "$0.00",
            "3": "$115944",
            "4": "$1063142",
            "5": "$405127",
            "6": "$458284",
            "7": "$1623096",
            "8": "$965081",
            "9": "$1046235",
          },
          {
            "0": "83",
            "1": "25",
            "2": "$0.00",
            "3": "$115944",
            "4": "$1115794",
            "5": "$305794",
            "6": "$361584",
            "7": "$1728500",
            "8": "$918500",
            "9": "$1004925",
          },
        ],
      };

      console.log(obj);

      function mapPdfData(list) {
        if (list) {
          let arr = [];
          let headers = [];
          let total_columns = 0;
          arr = list.map(i => {
            var obj = Object.values(i);
            if (total_columns < obj.length) {
              total_columns = obj.length;
            }
            return obj;
          });
          for (var i = 0; i < total_columns; i++) {
            headers.push("");
          }
          return { data: arr, headers: headers };
        }
      }
      let page = "22, 23, 4";
      let allData = { data: [], headers: [] };

      if (page) {
        page.split(",").forEach(p => {
          let list = mapPdfData(obj[p.trim()]);
          if (allData.data.length) {
            if (list && list.headers) {
              let temp_data = [];
              let maxRowLen = allData.data.length;
              let maxColLen = allData.data.length;
              if (list.data.length < maxRowLen) {
                maxRowLen = list.data.length;
              }

              for (var i = 0; i < maxRowLen; i++) {
                temp_data.push([...allData.data[i], ...list.data[i]]);
              }
              allData = {
                data: temp_data,
                headers: [...allData.headers, ...list.headers],
              };
            } else {
              alert("Please paste a valid CSV.");
            }
          } else {
            allData = list;
          }
        });

        return allData;
      }
    },
  },
};
</script>
<style lang="">
</style>