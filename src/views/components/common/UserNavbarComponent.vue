<template lang="">
  <div>
    <link
      rel="stylesheet"
      href="https://static.leadpages.net/fonts/font-awesome/5.14.0/css/all.min.css"
      referrerpolicy="no-referrer"
    />
    <link
      rel="preload"
      as="style"
      href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Poppins:300,400,500,700|Open+Sans:300,400,500,700|Montserrat:300,400,500,700"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Poppins:300,400,500,700|Open+Sans:300,400,500,700|Montserrat:300,400,500,700"
      type="text/css"
      referrerpolicy="no-referrer"
      media="all"
      onload="this.media='all'"
    />
    <div
      class="js-header-spacer css-1885l4r"
      data-qa-selector="header-spacer"
      style="height: 64px"
    >
      <div
        class="js-header-track css-1px0s3u"
        data-qa-selector="header-track"
        style="min-height: 104.844px"
      ></div>
    </div>
    <!-- HEADER -->
    <div
      class="site-header js-site-header css-19eb01s"
      data-scrolling="sticky"
      data-min-height="1"
      data-max-height="3"
      data-min-font-size="6"
      data-max-font-size="8"
      data-min-logo-width="124"
      data-max-logo-width="255"
      style="transition: top 0s linear 0s; top: 0px"
    >
      <div class="site-nav css-p62xri">
        <section
          :class="`header-section section css-v3buwk ${
            $props.scroll ? 'flexed-header advanced' : ''
          }`"
          data-guid="df6a575f-fcdd-16ba-5da7-bfabfa73200e"
        >
          <div
            class="container"
            id="header-section"
            style="
              padding: 0px;
              transition: padding-top 0.1s ease 0s, padding-bottom 0.1s ease 0s;
            "
          >
            <div
              class="layout flex flex--12"
              data-guid="130b269e-f326-6b5f-0a82-a8b5db621978"
            >
              <div
                class="column flex__item--md-3 flex__item--xs-12 css-97g332"
                data-guid="794cc2f4-1a62-5ea3-cd03-01f3a82e59a9"
              >
                <div class="inner-column css-1t694ow">
                  <div class="row flex flex--12 css-1v1axsl">
                    <div
                      class="composite flex__item--md-12 flex__item--xs-12 css-8x0d4x"
                    >
                      <div class="inner-composite flex flex--12">
                        <div
                          class="widget-column flex__item--md-12 flex__item--xs-12"
                        >
                          <div class="widget-row flex flex--12">
                            <div class="flex__item--md-12 flex__item--xs-12">
                              <div
                                data-widget-id="ba97703e-96ab-4aa9-b46e-7d17a0f33246"
                                class="widget"
                              >
                                <div>
                                  <div class="css-94ohs6">
                                    <router-link
                                      data-widget-link="true"
                                      to="/"
                                      target="_top"
                                      data-link-type="site-route"
                                      data-route-guid="a4181dc8-4262-0783-7ebe-d19332c18b26"
                                      data-route-slug=""
                                      class="css-11g9kr1 lp-image-react-container lp-icon-react__icon--linked"
                                      data-widget-type="LpLogoReact"
                                      contenteditable="false"
                                    >
                                      <img
                                        :class="`js-image-logo header-logo-element css-9pqhoz ${
                                          $props.scroll
                                            ? 'larger-logo advanced'
                                            : ''
                                        }`"
                                        src="https://lh3.googleusercontent.com/5Sdpn_J08uwaLGH1kHY03jCzd53v_Vt-nxXa75Y3R43TXPKKO2Kc2bdgqxZgrUs_8rc675fFXAE_ji8PWQLnePf4urjfGCqWOto=s0"
                                        alt=""
                                        data-image-upload-source="builder3"
                                        style="
                                          width: 124px;
                                          transition: width 0.1s ease 0s;
                                        "
                                      />
                                    </router-link>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div
                :class="`column flex__item--md-6 flex__item--xs-12 css-v8gnm5 mobile-hide-column ${
                  $props.scroll ? 'd-block advanced' : ''
                }`"
                data-guid="0aae427e-d095-a663-445e-6b1c510be78b"
              >
                <div class="inner-column css-8f3iaw">
                  <div class="row flex flex--12 css-1v1axsl">
                    <div
                      class="composite flex__item--md-12 flex__item--xs-12 css-8x0d4x"
                    >
                      <div class="inner-composite flex flex--12">
                        <div
                          class="widget-column flex__item--md-12 flex__item--xs-12"
                        >
                          <div class="widget-row flex flex--12">
                            <div class="flex__item--md-12 flex__item--xs-12">
                              <div
                                data-widget-id="72468288-87c7-9c0c-2eb1-b3d7a43c1719"
                                class="widget"
                              >
                                <div
                                  class="lp-nav w-72468288-87c7-9c0c-2eb1-b3d7a43c1719 css-11d63ln"
                                  data-widget-type="LpNavReact"
                                >
                                  <div
                                    class="lp-nav__link-container css-1oevijs"
                                  >
                                    <a
                                      data-widget-link="true"
                                      href="https://wealthlogix.com/"
                                      target="_top"
                                      data-link-type="site-route"
                                      data-route-guid="a4181dc8-4262-0783-7ebe-d19332c18b26"
                                      data-route-slug=""
                                      class="lp-nav__link"
                                      contenteditable="false"
                                      >HOME</a
                                    >
                                  </div>
                               <!--    <div
                                    class="lp-nav__link-container css-1oevijs"
                                  >
                                    <a
                                      data-widget-link="true"
                                      href="https://wealthlogix.com/solutions/"
                                      target="_top"
                                      data-link-type="site-route"
                                      data-route-guid="cbb728fd-ffa2-0e7c-094e-443b38251b0b"
                                      data-route-slug="solutions"
                                      class="lp-nav__link"
                                      contenteditable="false"
                                      >SOLUTIONS</a
                                    >
                                  </div> -->
                                  <div
                                    class="lp-nav__link-container css-1oevijs"
                                  >
                                    <a
                                      data-widget-link="true"
                                      href="https://wealthlogix.com/plans/"
                                      target="_top"
                                      data-link-type="site-route"
                                      data-route-guid="691566cd-5e76-30f6-d6dc-4a81e4453d9c"
                                      data-route-slug="plans"
                                      class="lp-nav__link"
                                      contenteditable="false"
                                      >PLANS</a
                                    >
                                  </div>
                              <!--     <div
                                    class="lp-nav__link-container css-1oevijs"
                                  >
                                    <a
                                      data-widget-link="true"
                                      href="https://wealthlogix.com/samples/"
                                      target="_top"
                                      data-link-type="site-route"
                                      data-route-guid="5671e6e8-d27a-14d3-a5f1-522fe5e97143"
                                      data-route-slug="samples"
                                      class="lp-nav__link"
                                      contenteditable="false"
                                      >SAMPLES</a
                                    >
                                  </div> -->
                                  <div
                                    class="lp-nav__link-container css-1oevijs"
                                  >
                                    <a
                                      data-widget-link="true"
                                      href="https://wealthlogix.com/contact/"
                                      target="_top"
                                      data-link-type="site-route"
                                      data-route-guid="ee3ba1b3-d54f-2ee9-f369-7f73c2d26388"
                                      data-route-slug="contact"
                                      class="lp-nav__link"
                                      contenteditable="false"
                                      >CONTACT</a
                                    >
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div
                class="column flex__item--md-3 flex__item--xs-12 css-1gqyvx6 mobile-hide-column"
                data-guid="8d662b82-5d34-55f8-ce11-31dd8d544119"
              >
                <div class="inner-column css-1ln1hwz">
                  <div class="row flex flex--12 css-1v1axsl">
                    <div
                      class="composite flex__item--md-12 flex__item--xs-12 css-8x0d4x"
                    >
                      <div class="inner-composite flex flex--12">
                        <div
                          class="widget-column flex__item--md-12 flex__item--xs-12"
                        >
                          <div class="widget-row flex flex--12">
                            <div class="flex__item--md-12 flex__item--xs-12">
                              <div
                                data-widget-id="45e3cbe8-409c-2ef1-4422-bd012221240f"
                                class="widget"
                              >
                                <div
                                  class="lp-button-react-wrapper css-1yltisf"
                                  data-widget-type="LpButtonReact"
                                >
                                  <router-link
                                    v-if="!$authCheck()"
                                    to="sign-in"
                                    data-widget-link="true"
                                    class="lp-button-react w-45e3cbe8-409c-2ef1-4422-bd012221240f lp-button-react--full is-bold lp-button-react--small lp-button-react--line font-scale-5 line-height-scale-5 css-1tvyf7o"
                                    contenteditable="false"
                                    >LOG IN</router-link
                                  >
                                  <div
                                    class="navDropMenu"
                                    v-else
                                  >
                                    <img
                                      :src="avatar"
                                      alt="User Icon"
                                      class="top-profile-img"
                                    />
                                    <div class="navDropMenuItems">
                                      <h5 class="navDropDownHeader">
                                        {{
                                          $currentUser()
                                            ? `${$currentUser().first_name} ${
                                                $currentUser().last_name
                                              }`
                                            : ""
                                        }}
                                      </h5>
                                      <router-link to="profile-details"
                                        ><img
                                          src="@/assets/images/user/dashboard-icon.svg"
                                          alt="Dashboard"
                                        />Dashboard</router-link
                                      >
                                      <router-link to="/"
                                        ><img
                                          src="@/assets/images/user/clients-line.svg"
                                          alt="Clients"
                                        />Clients</router-link
                                      >
                                      <router-link to="edit-profile"
                                        ><img
                                          src="@/assets/images/user/update-profile-icon.svg"
                                          alt="Profile"
                                        />Update Profile</router-link
                                      >
                                      <router-link to="change-password"
                                        ><img
                                          src="@/assets/images/user/change-password.svg"
                                          alt="Change Password"
                                        />Change Password</router-link
                                      >
                                      <router-link to="payment-history"
                                        ><img
                                          src="@/assets/images/user/my-payment.svg"
                                          alt="My Payment"
                                        />My Payments</router-link
                                      >
                                      <router-link
                                        to=""
                                        @click="logout()"
                                        class="cursor-pointer"
                                        ><img
                                          src="@/assets/images/user/logout.svg"
                                          alt="Log Out"
                                        />Log out</router-link
                                      >
                                      <div class="navDropDownButtomDiv">
                                        <h6>Free Plan</h6>
                                        <p>You are using FREE plan.</p>
                                        <div>
                                          <router-link
                                            to="https://wealthlogix.com/plans/"
                                            >Upgrade Now</router-link
                                          >
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>
      </div>
      <div
        :class="`js-mobile-nav-trigger mobile-nav-trigger ${
          $props.scroll ? 'advanced' : 'mobile-nav-trigger--show'
        }`"
        data-qa-selector="side-nav-menu-trigger"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          class="fas fa-bars lp-icon-react__icon"
        >
          <path d="M0 0h24v24H0z" fill="none"></path>
          <path
            d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"
            fill="rgba(41, 139, 116, 1)"
          ></path>
        </svg>
      </div>
      <div class="js-side-nav css-18z82ij">
        <div class="css-ow1ier">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            class="js-close-side-nav lp-icon-react__icon css-lsqhzm"
            aria-hidden="true"
          >
            <path
              d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"
              fill="rgba(41, 139, 116, 1)"
            ></path>
            <path d="M0 0h24v24H0z" fill="none"></path>
          </svg>
        </div>
        <div class="css-eokafy">
          <div class="composite flex__item--md-12 flex__item--xs-12 css-8x0d4x">
            <div class="inner-composite flex flex--12">
              <div class="widget-column flex__item--md-12 flex__item--xs-12">
                <div class="widget-row flex flex--12">
                  <div class="flex__item--md-12 flex__item--xs-12">
                    <div
                      data-widget-id="72468288-87c7-9c0c-2eb1-b3d7a43c1719"
                      class="widget"
                    >
                      <div
                        class="lp-nav w-72468288-87c7-9c0c-2eb1-b3d7a43c1719 css-11d63ln"
                        data-widget-type="LpNavReact"
                      >
                        <div class="lp-nav__link-container css-1oevijs">
                          <a
                            data-widget-link="true"
                            href="/"
                            target="_top"
                            data-link-type="site-route"
                            data-route-guid="a4181dc8-4262-0783-7ebe-d19332c18b26"
                            data-route-slug=""
                            class="lp-nav__link"
                            contenteditable="false"
                            >HOME</a
                          >
                        </div>
                        <div class="lp-nav__link-container css-1oevijs">
                          <a
                            data-widget-link="true"
                            href="/solutions/"
                            target="_top"
                            data-link-type="site-route"
                            data-route-guid="cbb728fd-ffa2-0e7c-094e-443b38251b0b"
                            data-route-slug="solutions"
                            class="lp-nav__link"
                            contenteditable="false"
                            >SOLUTIONS</a
                          >
                        </div>
                        <div class="lp-nav__link-container css-1oevijs">
                          <a
                            data-widget-link="true"
                            href="https://wealthlogix.com/plans/"
                            target="_top"
                            data-link-type="site-route"
                            data-route-guid="691566cd-5e76-30f6-d6dc-4a81e4453d9c"
                            data-route-slug="plans"
                            class="lp-nav__link"
                            contenteditable="false"
                            >PLANS</a
                          >
                        </div>
                        <div class="lp-nav__link-container css-1oevijs">
                          <a
                            data-widget-link="true"
                            href="/samples/"
                            target="_top"
                            data-link-type="site-route"
                            data-route-guid="5671e6e8-d27a-14d3-a5f1-522fe5e97143"
                            data-route-slug="samples"
                            class="lp-nav__link"
                            contenteditable="false"
                            >SAMPLES</a
                          >
                        </div>
                        <div class="lp-nav__link-container css-1oevijs">
                          <a
                            data-widget-link="true"
                            href="/contact/"
                            target="_top"
                            data-link-type="site-route"
                            data-route-guid="ee3ba1b3-d54f-2ee9-f369-7f73c2d26388"
                            data-route-slug="contact"
                            class="lp-nav__link"
                            contenteditable="false"
                            >CONTACT</a
                          >
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- <div class="css-1qtcj7h">
                <div class="composite flex__item--md-12 flex__item--xs-12 css-8x0d4x">
                    <div class="inner-composite flex flex--12">
                        <div class="widget-column flex__item--md-12 flex__item--xs-12">
                            <div class="widget-row flex flex--12">
                                <div class="flex__item--md-12 flex__item--xs-12">
                                    <div data-widget-id="45e3cbe8-409c-2ef1-4422-bd012221240f" class="widget">
                                        <div class="lp-button-react-wrapper css-1yltisf" data-widget-type="LpButtonReact">
                                            <a data-widget-link="true" class="lp-button-react w-45e3cbe8-409c-2ef1-4422-bd012221240f lp-button-react--full is-bold lp-button-react--small lp-button-react--line font-scale-5 line-height-scale-5 css-1tvyf7o" contenteditable="false">LOG IN</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div> -->

        <div v-if="$authCheck()" class="css-1qtcj7h">
          <div class="navDropMenu">
            <img src="@/assets/images/user/nav-user-icon.svg" alt="User Icon" />
            <div class="navDropMenuItems navDropMenuItemsMobile">
              <h5 class="navDropDownHeader">
                {{
                  $currentUser()
                    ? `${$currentUser().first_name} ${$currentUser().last_name}`
                    : ""
                }}
              </h5>
              <router-link to="/"
                ><img
                  src="@/assets/images/user/dashboard-icon.svg"
                  alt="Dashboard"
                />Dashboard</router-link
              >
              <router-link to="profile-details"
                ><img
                  src="@/assets/images/user/update-profile-icon.svg"
                  alt="Profile"
                />Update Profile</router-link
              >
              <router-link to="edit-profile"
                ><img
                  src="@/assets/images/user/change-password.svg"
                  alt="Change Password"
                />Change Password</router-link
              >
              <router-link to="change-password"
                ><img
                  src="@/assets/images/user/my-payment.svg"
                  alt="My Payment"
                />My Payments</router-link
              >
              <router-link to=""
                ><img
                  src="@/assets/images/user/logout.svg"
                  alt="Log Out"
                  @click="logout()"
                />Log out</router-link
              >
              <div class="navDropDownButtomDiv">
                <h6>Free Plan</h6>
                <p>You are using FREE plan.</p>
                <div>
                  <a href="https://wealthlogix.com/plans/"
                    >Upgrade Now</a
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="js-side-nav-shield side-nav-shield css-1a21613"></div>
    </div>
  </div>
</template>
<script>
import {
  authCheck,
  getCurrentUser,
  getRefreshToken,
  getAccessToken,
} from "../../../services/helper";
import { post } from "../../../network/requests";
import { getUrl } from "../../../network/url";
import UserIcon from "../../../assets/images/icons/user.svg";

export default {
  props: ["scroll"],
  methods: {
    logout: function () {
      if (authCheck()) {
        this.$store.dispatch("loader", true);
        post(
          getUrl("logout"),
          { refresh: getRefreshToken() },
          { headers: { Authorization: `Bearer ${getAccessToken()}` } }
        )
          .then((response) => {
            localStorage.removeItem("refresh_token");
            localStorage.removeItem("access_token");
            localStorage.removeItem("plan_active");
            localStorage.removeItem("currentUser");
            this.$store.dispatch("loader", false);
            this.$store.dispatch("user", false);
            this.$toast.success(response.data.message);
            this.$router.push("/sign-in");
          })
          .catch((error) => {
            this.$store.dispatch("loader", false);
            if (
              error.code === "ERR_BAD_RESPONSE" ||
              error.code === "ERR_NETWORK"
            ) {
              this.$toast.error(error.message);
            }
            localStorage.removeItem("refresh_token");
            localStorage.removeItem("access_token");
            localStorage.removeItem("plan_active");
            localStorage.removeItem("currentUser");
            this.$router.push("/sign-in");
          });
      }
    },
  },
  computed: {
    avatar() {
      if (this.$store.state.data.user && this.$store.state.data.user.avatar) {
        return this.$store.state.data.user.avatar;
      } 
      
      if (getCurrentUser() && getCurrentUser().avatar) {
        return getCurrentUser().avatar;
      }

      return UserIcon;
    },
  },
};
</script>
<style lang=""></style>
